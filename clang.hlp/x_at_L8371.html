<html>

<head>
<title>Pointers Based on a Nonfixed Segment - C Language and Libraries Help</title>
<link rel="stylesheet" href="../style.css">
<link rel="shortcut icon" href="../helpicon.png">
</head>

<body>
<div class="page-heading">
<form action="https://www.google.com/search" method="GET">
<input name="as_q" id="search-box" placeholder="Search">
<input type="hidden" name="as_sitesearch" value="fragglet.github.io/dos-help-files/*">
</form>
C Language and Libraries Help (clang.hlp) (<a href='index.html'>Table of Contents</a>; <a href='TOPIC_LIST.html'>Topic list</a>)</div>
<div class="page-title"> Pointers Based on a Nonfixed Segment</div>
<pre>                                             <span class='grhilite'>◄</span><a href='x_based.html'>Up</a><span class='grhilite'>►</span> <span class='grhilite'>◄</span><a href='../advisor.hlp/hv.html'>Contents</a><span class='grhilite'>►</span> <span class='grhilite'>◄</span><a href='../advisor.hlp/vx.html'>Index</a><span class='grhilite'>►</span> <span class='grhilite'>◄</span><a href='javascript:history.back();'>Back</a><span class='grhilite'>►</span>
─────C/C++ Language─────────────────────────────────────────────────────────
 
     Pointers based on a nonfixed segment have access to locations in
     any segment simply by changing the value of the base. Changing a
     single segment value causes all pointers based on that segment to
     address new locations. You can also make assignments to the based
     pointers themselves to change their offset values.
 
     Pointers Based on the Segment of Another Pointer
 
     Form of &lt;base&gt;:
 
          (__segment)&lt;ptr&gt;
 
     A based pointer declared this way uses the segment portion of
     &lt;ptr&gt; as its base. If &lt;ptr&gt; is a near pointer, the declared
     pointer uses the DS register as its base. If &lt;ptr&gt; is a far
     pointer, the declared pointer uses the segment value of &lt;ptr&gt; as
     its base. Changing the segment value of &lt;ptr&gt; causes the based
     pointer to address a new location.
 
     For example:
 
          char __far *far_ptr;
          char __based((__segment)far_ptr) *bp;  // *bp takes the same
                                                 // segment as far_ptr
 
     Pointers Based on a Segment Variable
 
     Form of &lt;base&gt;:
 
          &lt;segvar&gt;
 
     A based pointer declared this way uses &lt;segvar&gt; as its base.
     Assigning a new value to &lt;segvar&gt; causes the based pointer to
     address a different location. This type of based pointer can
     be used for dynamic allocation of based objects.
 
     For example:
 
          __segment seg1;
          char __based(seg1) *bp;  // pointer using seg1 as its base
 
     See: <span class='grhilite'>◄</span><a href='x_at_L80ca.html'>Dynamic Allocation Example</a><span class='grhilite'>►</span>
 
     Pointers Based on Another Pointer
 
     Form of &lt;base&gt;:
 
          &lt;ptr&gt;
 
     A based pointer declared this way acts as an offset from &lt;ptr&gt;.
     Assigning a new value to &lt;ptr&gt; causes the based pointer to
     address a different location. The 32-bit compiler recognizes this
     form of based addressing.
 
     For example:
 
          char *cp;
          char __based(cp) *bp;    // pointer using ip as its base
 
          cp = (char *)malloc(100);
          bp = 2;
          *bp = 'a';               // equivalent to cp[2] = 'a';
                                    -♦-
</pre>
</body>

</html>
