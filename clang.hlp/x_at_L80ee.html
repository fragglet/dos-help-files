<html>

<head>
<title>SPAWN.C - C Language and Libraries Help</title>
<link rel="stylesheet" href="../style.css">
</head>

<body>
<div class="page-heading">
<form action="https://duckduckgo.com/" method="GET">
<input name="q" id="search-box" placeholder="Search">
<input type="hidden" name="sites" value="fragglet.github.io">
</form>
C Language and Libraries Help (clang.hlp) (<a href='index.html'>Table of Contents</a>; <a href='TOPIC_LIST.html'>Topic list</a>)</div>
<div class="page-title"> SPAWN.C</div>
<pre>                                             <span class='grhilite'>◄</span><a href='x_at_L8122.html'>Up</a><span class='grhilite'>►</span> <span class='grhilite'>◄</span><a href='../advisor.hlp/hv.html'>Contents</a><span class='grhilite'>►</span> <span class='grhilite'>◄</span><a href='../advisor.hlp/vx.html'>Index</a><span class='grhilite'>►</span> <span class='grhilite'>◄</span><a href='javascript:history.back();'>Back</a><span class='grhilite'>►</span>
─────Run-Time Library───────────────────────────────────────────────────────
 
/* SPAWN.C illustrates the different versions of spawn including:
 *      _spawnl         _spawnle        _spawnlp        _spawnlpe
 *      _spawnv         _spawnve        _spawnvp        _spawnvpe
 *
 * Although SPAWN.C can spawn any program, you can verify how different
 * versions handle arguments and environment by compiling and
 * specifying the sample program <a href='x_at_L80a5.html'>ARGS.C</a>. See <a href='x_at_L80be.html'>EXEC.C</a> for examples
 * of the similar exec functions.
 */
 
#include &lt;stdio.h&gt;
#include &lt;conio.h&gt;
#include &lt;process.h&gt;
 
char *my_env[] =                        /* Environment for _spawn?e */
{
    "THIS=environment will be",
    "PASSED=to child by the",
    "SPAWN=functions",
    NULL
};
 
void main()
{
    char *args[4], prog[80];
    int ch, r;
 
    printf( "Enter name of program to spawn: " );
    gets( prog );
    printf( " 1. _spawnl   2. _spawnle   3. _spawnlp   4. _spawnlpe\n" );
    printf( " 5. _spawnv   6. _spawnve   7. _spawnvp   8. _spawnvpe\n" );
    printf( "Type a number from 1 to 8 (or 0 to quit): " );
    ch = _getche();
    if( (ch &lt; '1') || (ch &gt; '8') )
        exit( -1 );
    printf( "\n\n" );
 
    /* Arguments for _spawnv? */
    args[0] = prog;
    args[1] = "_spawn??";
    args[2] = "two";
    args[3] = NULL;
 
    switch( ch )
    {
        case '1':
            r = _spawnl( _P_WAIT, prog, prog, "_spawnl", "two", NULL );
            break;
        case '2':
            r = _spawnle( _P_WAIT, prog, prog, "_spawnle", "two",
                         NULL, my_env );
            break;
        case '3':
            r = _spawnlp( _P_WAIT, prog, prog, "_spawnlp", "two", NULL );
            break;
        case '4':
            r = _spawnlpe( _P_WAIT, prog, prog, "_spawnlpe", "two",
                          NULL, my_env );
            break;
        case '5':
            r = _spawnv( _P_WAIT, prog, args );
            break;
        case '6':
            r = _spawnve( _P_WAIT, prog, args, my_env );
            break;
        case '7':
            r = _spawnvp( _P_WAIT, prog, args );
            break;
        case '8':
            r = _spawnvpe( _P_WAIT, prog, args, my_env );
            break;
        default:
            break;
    }
    if( r == -1 )
        printf( "Couldn't spawn process" );
    else
        printf( "\nReturned from SPAWN!" );
    exit( r );
}
                                    -♦-
</pre>
</body>

</html>
