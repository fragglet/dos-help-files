<html>

<head>
<title>ALIVE.PAS - qpgraph.hlp</title>
<link rel="stylesheet" href="../style.css">
<link rel="shortcut icon" href="../helpicon.png">
</head>

<body>
<div class="page-heading">
<form action="https://www.google.com/search" method="GET">
<input name="as_q" id="search-box" placeholder="Search">
<input type="hidden" name="as_sitesearch" value="fragglet.github.io/dos-help-files/*">
</form>
qpgraph.hlp (<a href='TOPIC_LIST.html'>Topic list</a>)</div>
<div class="page-title"> ALIVE.PAS</div>
<pre>  <span class='grhilite'>◄</span>Example<span class='grhilite'>►</span> <span class='grhilite'>◄</span><a href='../unknown.html#h.contents'>Contents</a><span class='grhilite'>►</span> <span class='grhilite'>◄</span><a href='../unknown.html#h.index'>Index</a><span class='grhilite'>►</span>                                    <span class='grhilite'>◄</span><a href='..//b.html'>Back</a><span class='grhilite'>►</span>
 
PROGRAM alive;
 
{ ALIVE.PAS illustrates animation functions including:
 
      _ImageSize    _GetImage    _PutImage
 
  It also uses the following:
 
      FreeMem       _OutText     _SetTextPosition    _SetVideoMode
      GetMem        MaxAvail
}
 
{$M 16384, 0, 655350}
 
USES
    Crt, MSGraph;
 
TYPE
    actiontype  = ARRAY [0..4] OF Byte;
    descriptype = ARRAY [_GOR.._GXOR] OF STRING;
 
CONST
 
    action  : actiontype  = (_GOR, _GAND, _GPRESET, _GPSET, _GXOR);
    descrip : descriptype = ('OR    ', 'AND   ', 'PRESET', 'PSET  ',
                             'XOR   ');
    max_buffer = 65520;
 
VAR
    x, y, i   : Integer;
    vidmode   : Integer;
    buffer    : ^Byte;
    imsize    : LongInt;
    bufsize   : Word;
    errorcode : Integer;
    c         : Char;
 
BEGIN
 
    x := 30;
    y := 30;
    IF (_SetVideoMode( _MaxResMode ) = 0) THEN
        Halt( 1 );
    _SetColor( 2 );
 
    FOR i := _GOR TO _GXOR DO
        BEGIN
        x := 50;
        y := y + 40;
        _SetTextPosition( 1, 1 );
        _OutText( descrip[i] );
        _Ellipse( _GFillInterior, x - 15, y - 15, x + 15, y + 15 );
 
        imsize := _ImageSize( x - 15, y - 15, x + 16, y + 16 );
        IF ((imsize &gt; max_buffer) OR (imsize &gt; MaxAvail)) THEN
            BEGIN
            errorcode := _SetVideoMode( _DefaultMode );
            Writeln( 'Image too big.' );
            Halt( 0 );
            END
        ELSE
            bufsize := imsize;
 
        GetMem( buffer, bufsize );
        IF (buffer = NIL) THEN
            BEGIN
            errorcode := _SetVideoMode( _DefaultMode );
            FreeMem( buffer, bufsize );
            Writeln( 'Not enough memory for image buffer.' );
            Halt( 0 );
            END;
        _GetImage( x - 16, y - 16, x + 16, y + 16, buffer^ );
 
        { Display action type and copy a row of ellipses with that type. }
        WHILE (x &lt; 260) DO
            BEGIN
            x := x + 5;
            _PutImage( x - 16, y - 16, buffer^, action[i] );
            END;
        c := ReadKey;
 
        FreeMem( buffer, bufsize );
        END;
 
    errorcode := _SetVideoMode( _DefaultMode );
 
END.
 
</pre>
</body>

</html>
