<html>

<head>
<title>TIMES.C - qc.hlp</title>
<link rel="stylesheet" href="../style.css">
<link rel="shortcut icon" href="../helpicon.png">
</head>

<body>
<div class="page-heading">
<form action="https://www.google.com/search" method="GET">
<input name="as_q" id="search-box" placeholder="Search">
<input type="hidden" name="as_sitesearch" value="fragglet.github.io/dos-help-files/*">
</form>
qc.hlp (<a href='index.html'>Table of Contents</a>; <a href='TOPIC_LIST.html'>Topic list</a>)</div>
<div class="notice">
  <img src="../warning.png">
  <div class="heading">
    Important Notice
  </div>
  <div class="text">
    The pages on this site contain documentation for very old MS-DOS software,
    purely for historical purposes.

    If you're looking for up-to-date documentation, particularly for programming,
    you should not rely on the information found here, as it will be woefully
    out of date.
  </div>
</div>
<div class="page-title"> TIMES.C</div>
<pre>                                             <span class='grhilite'>◄</span><a href='lib_dot_lst.html'>Up</a><span class='grhilite'>►</span> <span class='grhilite'>◄</span><a href='index.html'>Contents</a><span class='grhilite'>►</span> <span class='grhilite'>◄</span><a href='h_dot_index.html'>Index</a><span class='grhilite'>►</span> <span class='grhilite'>◄</span><a href='javascript:history.back();'>Back</a><span class='grhilite'>►</span>
────────────────────────────────────────────────────────────────────────────
 
/* TIMES.C illustrates various time and date functions including:
 *      time            ftime           ctime       asctime
 *      localtime       gmtime          mktime      tzset
 *      _strtime        _strdate        strftime
 *
 * Also the global variable:
 *      tzname
 */
 
#include &lt;time.h&gt;
#include &lt;stdio.h&gt;
#include &lt;sys\types.h&gt;
#include &lt;sys\timeb.h&gt;
#include &lt;string.h&gt;
 
void main()
{
    char tmpbuf[128], ampm[] = "AM";
    time_t ltime;
    struct timeb tstruct;
    struct tm *today, *gmt, xmas = { 0, 0, 12, 25, 11, 88 };
 
    /* Set time zone from TZ environment variable. If TZ is not set,
     * PST8PDT is used (Pacific standard time, daylight savings).
     */
    tzset();
 
    /* Display DOS-style date and time. */
    _strtime( tmpbuf );
    printf( "DOS time:\t\t\t\t%s\n", tmpbuf );
    _strdate( tmpbuf );
    printf( "DOS date:\t\t\t\t%s\n", tmpbuf );
 
    /* Get UNIX-style time and display as number and string. */
    time( &amp;ltime );
    printf( "Time in seconds since GMT 1/1/70:\t%ld\n", ltime );
    printf( "UNIX time and date:\t\t\t%s", ctime( &amp;ltime ) );
 
    /* Display GMT. */
    gmt = gmtime( &amp;ltime );
    printf( "Greenwich Mean Time:\t\t\t%s", asctime( gmt ) );
 
    /* Convert to time structure and adjust for PM if necessary. */
    today = localtime( &amp;ltime );
    if( today-&gt;tm_hour &gt; 12 )
    {
        strcpy( ampm, "PM" );
        today-&gt;tm_hour -= 12;
    }
    /* Note how pointer addition is used to skip the first 11 characters
     * and printf is used to trim off terminating characters.
     */
    printf( "12-hour time:\t\t\t\t%.8s %s\n",
            asctime( today ) + 11, ampm );
 
    /* Print additional time information. */
    ftime( &amp;tstruct );
    printf( "Plus miliseconds:\t\t\t%u\n", tstruct.millitm );
    printf( "Zone difference in seconds from GMT:\t%u\n", tstruct.timezone );
    printf( "Time zone name:\t\t\t\t%s\n", tzname[0] );
    printf( "Daylight savings:\t\t\t%s\n", tstruct.dstflag ? "YES" : "NO" );
 
    /* Make time for noon on Christmas, 1988. */
    if( mktime( &amp;xmas ) != (time_t)-1 )
        printf( "Christmas\t\t\t\t%s\n", asctime( &amp;xmas ) );
 
    /* Use time structure to build a customized time string. */
    today = localtime( &amp;ltime );
 
    /* Use strftime to build a customized time string. */
    strftime( tmpbuf, 128, "Today is %A, day %d of %B in the year %Y.\n", today );
    printf( tmpbuf );
}
</pre>
</body>

</html>
