<html>

<head>
<title>DIRECT.C - qc.hlp</title>
<link rel="stylesheet" href="../style.css">
</head>

<body>
<div class="page-heading">
<form action="https://duckduckgo.com/" method="GET">
<input name="q" id="search-box" placeholder="Search">
<input type="hidden" name="sites" value="fragglet.github.io">
</form>
qc.hlp (<a href='index.html'>Table of Contents</a>; <a href='TOPIC_LIST.html'>Topic list</a>)</div>
<div class="page-title"> DIRECT.C</div>
<pre>                                             <span class='grhilite'>◄</span><a href='lib_dot_lst.html'>Up</a><span class='grhilite'>►</span> <span class='grhilite'>◄</span><a href='index.html'>Contents</a><span class='grhilite'>►</span> <span class='grhilite'>◄</span><a href='h_dot_index.html'>Index</a><span class='grhilite'>►</span> <span class='grhilite'>◄</span><a href='javascript:history.back();'>Back</a><span class='grhilite'>►</span>
────────────────────────────────────────────────────────────────────────────
 
/* DIRECT.C illustrates directory functions and miscellaneous file
 * functions including:
 *      getcwd          mkdir           chdir           rmdir
 *      system          mktemp          remove          unlink
 *      stat
 *
 * See <a href='x_at_L82a9.html'>NULLFILE.C</a> for an example of fstat, which is similar to stat.
 */
 
#include &lt;direct.h&gt;
#include &lt;stdlib.h&gt;
#include &lt;stdio.h&gt;
#include &lt;conio.h&gt;
#include &lt;io.h&gt;
#include &lt;time.h&gt;
#include &lt;sys/types.h&gt;
#include &lt;sys/stat.h&gt;
#define ANSI                /* Delete for UNIX version. */
 
void main()
{
    char cwd[_MAX_DIR];
    char tmpdir[] = "DRXXXXXX";
    struct stat filestat;
 
    /* Get the current working directory. */
    getcwd( cwd, _MAX_DIR );
 
    /* Try to make temporary name for directory. */
    if( mktemp( tmpdir ) == NULL )
    {
        perror( "Can't make temporary directory" );
        exit( 1 );
    }
 
    /* Try to create a new directory, and if successful, change to it. */
    if( !mkdir( tmpdir ) )
    {
        chdir( tmpdir );
 
        /* Create and display a file to prove it. */
        system( "echo This is a test. &gt; TEST.TXT" );
        system( "type test.txt" );
 
        /* Display some file statistics. */
        if( !stat( "TEST.TXT", &amp;filestat ) )
        {
            printf( "File: TEST.TXT\n" );
            printf( "Drive %c:\n", filestat.st_dev + 'A' );
            printf( "Directory: %s\\%s\n", cwd + 2, tmpdir );
            printf( "Size: %ld\n", filestat.st_size );
            printf( "Created: %s", ctime( &amp;filestat.st_atime ) );
        }
        getch();
 
        /* Delete file, go back to original directory, and remove
         * directory.
         */
#if defined( ANSI )
        remove( "TEST.TXT" );       /* ANSI compatible */
#else
        unlink( "TEST.TXT" );       /* UNIX compatible */
#endif
        chdir( cwd );
        rmdir( tmpdir );
    }
}
</pre>
</body>

</html>
