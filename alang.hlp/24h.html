<html>

<head>
<title>Interrupt 24h - Assembly Language Help</title>
<link rel="stylesheet" href="../style.css">
<link rel="shortcut icon" href="../helpicon.png">
</head>

<body>
<div class="page-heading">
<form action="https://www.google.com/search" method="GET">
<input name="as_q" id="search-box" placeholder="Search">
<input type="hidden" name="as_sitesearch" value="fragglet.github.io/dos-help-files/*">
</form>
Assembly Language Help (alang.hlp) (<a href='index.html'>Table of Contents</a>; <a href='TOPIC_LIST.html'>Topic list</a>)</div>
<div class="notice">
  <img src="../warning.png">
  <div class="heading">
    Important Notice
  </div>
  <div class="text">
    The pages on this site contain documentation for very old MS-DOS software,
    purely for historical purposes.

    If you're looking for up-to-date documentation, particularly for programming,
    you should not rely on the information found here, as it will be woefully
    out of date.
  </div>
</div>
<div class="page-title"> Interrupt 24h</div>
<pre> <span class='grhilite'>◄</span><a href='x_at_L8329.html'>Detail</a><span class='grhilite'>►</span> <span class='grhilite'>◄</span><a href='x_at_L8475.html'>Example</a><span class='grhilite'>►</span>                          <span class='grhilite'>◄</span><a href='x_at_L8255.html'>Up</a><span class='grhilite'>►</span> <span class='grhilite'>◄</span><a href='../pwb.hlp/hv.html'>Contents</a><span class='grhilite'>►</span> <span class='grhilite'>◄</span><a href='../pwb.hlp/vx.html'>Index</a><span class='grhilite'>►</span> <span class='grhilite'>◄</span><a href='javascript:history.back();'>Back</a><span class='grhilite'>►</span>
────────────────────────────────────────────────────────────────────────────
 
  Interrupt:   24h
 
  Title:       Critical-Error Handler Address
 
  See also:    <a href='psp.html'>Program Segment Prefix</a>, <a href='22h.html'>CTRL+C Handler</a>
 
  Description:
 
     The machine interrupt vector for Int 24h (memory locations
     0000:0090h through 0000:0093h) contains the address of the routine
     that receives control when a critical error (usually a hardware
     error) is detected. This address is also copied into locations 12h
     through 15h of the program segment prefix (PSP) when a program is
     loaded but before it begins executing, and is restored from the
     PSP (in case it was modified by the application) as part of
     MS-DOS's termination handling.
 
     When a disk I/O error occurs, MS-DOS automatically retries the
     operation before issuing a critical-error Int 24h. The number of
     retries varies in different versions of MS-DOS but is typically in
     the range three to five.
 
     On entry to the critical-error interrupt handler, bit 7 of
     register AH is clear (0) if the error was a disk I/O error;
     otherwise, it is set (1). BP:SI contains the address of a
     device-driver header from which additional information can be
     obtained. Interrupts are disabled. The registers will be set up
     for a retry operation, and an error code will be in the lower half
     of the DI register, with the upper half undefined.
 
     If the Int 24h handler returns control directly to the application
     program rather than to MS-DOS, it must restore the program's
     registers, removing all but the last three words from the stack,
     and issue an IRET. Control returns to the instruction immediately
     following the function call that caused the error. This option
     leaves MS-DOS in an unstable state until a call to an Int 21h
     function higher than Function 0Ch is made.
 
     COMMAND.COM provides the default critical-error handler,
     which displays a message about the error and, after displaying a
     question such as ABORT, RETRY, FAIL, or IGNORE?, prompts
     the user for a response.
 
     This interrupt should never be issued directly.
                                    -♦-
</pre>
</body>

</html>
