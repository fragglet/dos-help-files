<html>

<head>
<title>_UnmapFreePhysReg - Virtual Devices (3.1)</title>
<link rel="stylesheet" href="../style.css">
<link rel="shortcut icon" href="../helpicon.png">
</head>

<body>
<div class="page-heading">
<form action="https://www.google.com/search" method="GET">
<input name="as_q" id="search-box" placeholder="Search">
<input type="hidden" name="as_sitesearch" value="dos-help.soulsphere.org/*">
</form>
Virtual Devices (3.1) (vdag31qh.hlp) (<a href='index.html'>Table of Contents</a>; <a href='TOPIC_LIST.html'>Topic list</a>)</div>
<div class="notice">
  <img src="../warning.png">
  <div class="heading">
    Important Notice
  </div>
  <div class="text">
    The pages on this site contain documentation for very old MS-DOS software,
    purely for historical purposes.

    If you're looking for up-to-date documentation, particularly for programming,
    you should not rely on the information found here, as it will be woefully
    out of date.
  </div>
</div>
<div class="page-title"> _UnmapFreePhysReg</div>
<pre>                                                     <span class='grhilite'>◄</span><a href='Free_Physical_Memory_Management.html'>Up</a><span class='grhilite'>►</span> <span class='grhilite'>◄</span><a href='x_XchgFreePhysReg.html'>Next</a><span class='grhilite'>►</span> <span class='grhilite'>◄</span><a href='javascript:history.back();'>Previous</a><span class='grhilite'>►</span>
<b></b><i>────────────────────────────────────────────────────────────────────────────</i>
 
include vmm.inc
 
VMMcall _UnmapFreePhysReg, &lt;LinPgNum, nPages, flags&gt;
 
or      eax, eax            ; nonzero if unmapped, zero if error
jz      not_unmapped
 
The _UnmapFreePhysReg service unmaps a page in a free physical region and
places the physical memory back on the free list.
 
<b>Parameter  Description</b>
────────────────────────────────────────────────────────────────────────────
 
<i>LinPgNum</i>   Specifies the linear page number of the first page to unmap. A
           linear page number is a linear address shifted right by 12 bits.
 
<i>nPages</i>     Specifies the number of pages in the region to unmap. This region
           must lie within the boundaries of a free physical region
           previously allocated using the _PageAllocate service.
 
<i>flags</i>      Specifies the operation flags. This parameter must be set to 0.
 
<b>Return Value</b>
 
The EAX register contains a nonzero value if the service is successful.
Otherwise, EAX contains zero to indicate an error, such as an invalid linear
page number, an invalid range of pages, or part of the range already not
present.
 
<b>Comments</b>
 
This service is intended to be used in a free-physical-region callback
procedure installed using the _SetFreePhysRegCalBk service. Virtual devices
should not call this service until after the Sys_VM_Init message or the
<b>Init_Complete</b> message has been received.
 
If a virtual device maps pages using the PageFixed value with the
<b>_MapFreePhysReg</b> service, it must not attempt to unmap the pages using the
<b>_UnmapFreePhysReg</b> service.
 
<b>Uses</b>
 
EAX
 
<b>See Also</b>
 
<b>_MapFreePhysReg, _PageAllocate</b>
 
 
                                      ♦
 
</pre>
</body>

</html>
