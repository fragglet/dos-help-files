<html>

<head>
<title>Device_Init - Virtual Devices (3.1)</title>
<link rel="stylesheet" href="../style.css">
<link rel="shortcut icon" href="../helpicon.png">
</head>

<body>
<div class="page-heading">
<form action="https://www.google.com/search" method="GET">
<input name="as_q" id="search-box" placeholder="Search">
<input type="hidden" name="as_sitesearch" value="fragglet.github.io/dos-help-files/*">
</form>
Virtual Devices (3.1) (vdag31qh.hlp) (<a href='index.html'>Table of Contents</a>; <a href='TOPIC_LIST.html'>Topic list</a>)</div>
<div class="page-title"> Device_Init</div>
<pre>                                                     <span class='grhilite'>◄</span><a href='VMM_Control_Messages.html'>Up</a><span class='grhilite'>►</span> <span class='grhilite'>◄</span><a href='Device_Reboot_Notify.html'>Next</a><span class='grhilite'>►</span> <span class='grhilite'>◄</span><a href='javascript:history.back();'>Previous</a><span class='grhilite'>►</span>
<b></b><i>────────────────────────────────────────────────────────────────────────────</i>
 
include vmm.inc
 
mov     ebx, SysVM                  ; system VM handle
mov     esi, OFFSET32 CommandTail   ; points to WIN386 command tail
mov     eax, Device_Init
VMMcall System_Control
 
The Device_Init message directs the virtual device to initialize itself. The
virtual device typically allocates memory for a device-specific section in
the control block, allocates other memory areas, hooks interrupts and I/O
ports, and specifies instance data.
 
<b>Parameter    Description</b>
────────────────────────────────────────────────────────────────────────────
 
<i>SysVM</i>        Specifies a handle identifying the system virtual machine.
 
<i>CommandTail</i>  Points to the command tail retrieved from the program segment
             prefix (PSP) of WIN386.EXE. The first byte in the command tail
             specifies the length in bytes of the tail.
 
<b>Return Value</b>
 
The carry flag is clear if the virtual device is initialized successfully.
Otherwise, the carry flag is set to indicate an error and prevent the system
from loading the virtual device.
 
<b>Comments</b>
 
The virtual device should allocate a device-specific section in the control
block of the system virtual machine and initialize the section.
 
The virtual device can call the Simulate_Int and Exec_Int services in the
system virtual machine.
 
<b>Uses</b>
 
Flags
 
<b>See Also</b>
 
<b>Init_Complete, Sys_Critical_Init</b>
 
 
                                      ♦
 
</pre>
</body>

</html>
