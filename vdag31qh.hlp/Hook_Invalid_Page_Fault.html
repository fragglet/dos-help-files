<html>

<head>
<title>Hook_Invalid_Page_Fault - Virtual Devices (3.1)</title>
<link rel="stylesheet" href="../style.css">
<link rel="shortcut icon" href="../helpicon.png">
</head>

<body>
<div class="page-heading">
<form action="https://www.google.com/search" method="GET">
<input name="as_q" id="search-box" placeholder="Search">
<input type="hidden" name="as_sitesearch" value="dos-help.soulsphere.org/*">
</form>
Virtual Devices (3.1) (vdag31qh.hlp) (<a href='index.html'>Table of Contents</a>; <a href='TOPIC_LIST.html'>Topic list</a>)</div>
<div class="notice">
  <img src="../warning.png">
  <div class="heading">
    Important Notice
  </div>
  <div class="text">
    The pages on this site contain documentation for very old MS-DOS software,
    purely for historical purposes.

    If you're looking for up-to-date documentation, particularly for programming,
    you should not rely on the information found here, as it will be woefully
    out of date.
  </div>
</div>
<div class="page-title"> Hook_Invalid_Page_Fault</div>
<pre>                                                     <span class='grhilite'>◄</span><a href='Processor_Fault_and_Interrupt_Services.html'>Up</a><span class='grhilite'>►</span> <span class='grhilite'>◄</span><a href='Hook_NMI_Event.html'>Next</a><span class='grhilite'>►</span> <span class='grhilite'>◄</span><a href='javascript:history.back();'>Previous</a><span class='grhilite'>►</span>
<b></b><i>────────────────────────────────────────────────────────────────────────────</i>
 
include vmm.inc
 
mov     esi, OFFSET32 HookProc  ; points to hook procedure to install
VMMcall Hook_Invalid_Page_Fault
 
jc      not_installed           ; carry set if procedure not installed
 
The Hook_Invalid_Page_Fault service installs a hook procedure to handle any
invalid-page faults not handled by the system invalid-page-fault handler.
 
<b>Parameter  Description</b>
────────────────────────────────────────────────────────────────────────────
 
<i>HookProc</i>   Points to the hook procedure to install. See the Comments section
           for more information about this procedure.
 
<b>Return Value</b>
 
The carry flag is clear if the hook procedure is installed. The carry flag
is set if the procedure could not be installed.
 
<b>Comments</b>
 
The system enables interrupts and calls the hook procedure as follows:
 
mov     ebx, VM             ; current VM handle
mov     edi, OFFSET32 ipf   ; points to an IPF_Data
call    [HookProc]
 
jc      not_corrected       ; carry set if procedure did not correct fault
 
The VM parameter is a handle identifying the current virtual machine, and
the ipf parameter points to an IPF_Data structure containing information
about the page fault.
 
The procedure clears the carry flag if it handles the page fault. Otherwise,
it must set the carry flag to indicate that the page fault has not been
corrected. The system passes the fault to the next procedure in the chain.
 
The hook procedure may use all registers except the segment registers.
 
<b>Uses</b>
 
Flags
 
<b>See Also</b>
 
<b>Unhook_Invalid_Page_Fault, IPF_Data</b>
 
 
                                      ♦
 
</pre>
</body>

</html>
